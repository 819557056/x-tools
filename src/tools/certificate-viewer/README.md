# 证书查看器 (Certificate Viewer)

## 功能简介

证书查看器是一个类似于 Windows 证书查看器的工具，用于解析和展示 X.509 证书的详细信息。

## 支持的输入格式

- **PEM 格式**: 带有 `-----BEGIN CERTIFICATE-----` 和 `-----END CERTIFICATE-----` 的文本格式
- **Base64 格式**: 纯 Base64 编码的证书（无 PEM 头尾）
- **HEX 格式**: 十六进制编码的证书
- **文件上传**: 支持 `.crt`, `.cer`, `.pem`, `.der` 等证书文件

## 功能特性

### 1. 多种输入方式
- 文本输入：直接粘贴证书内容
- 文件上传：通过文件选择器或拖放上传证书文件
- 自动格式识别：无需手动选择格式

### 🇨🇳 国密证书支持
- **完整支持国密 SM2 证书**：能够解析使用 SM2 算法的证书
- **识别国密签名算法**：自动识别 SM3withSM2 等国密签名算法
- **UTF-8 编码完美支持**：正确显示国密证书中的中文字段（如单位名称、地区等）
- **显示国密特有信息**：展示 SM2 公钥数据、椭圆曲线参数、算法标识等
- **兼容标准证书**：同时支持 RSA、ECDSA 等国际标准算法

### 2. 证书信息展示

#### 常规标签
- 颁发给 (Subject) - 支持中文显示
- 颁发者 (Issuer) - 支持中文显示
- 有效期（生效日期和失效日期）
- 证书用途（友好的中文描述）
- 证书有效性状态（自动检查）

#### 详细信息标签
- 版本号 (V1/V2/V3)
- 序列号（十六进制，空格分隔）
- 签名算法（自动识别并显示友好名称）
- 颁发者 DN (Distinguished Name) - 完整 DN 字符串
- 使用者 DN - 完整 DN 字符串
- 公钥算法和大小
- 公钥详细信息：
  - RSA: 模数、指数、密钥长度
  - EC/SM2: 曲线名称、公钥数据、密钥长度
- **扩展字段（完整解析）**：
  - ✅ keyUsage - 密钥用途（数字签名、密钥加密、证书签名等）
  - ✅ extKeyUsage - 扩展密钥用途（服务器认证、客户端认证、代码签名等）
  - ✅ basicConstraints - 基本约束（CA 标识、路径长度限制）
  - ✅ subjectAltName - 主体备用名称（DNS、IP、URI）
  - ✅ cRLDistributionPoints - CRL 分发点（完整 URL）
  - ✅ authorityInfoAccess - 颁发机构信息访问（OCSP、CA Issuers）
  - ✅ certificatePolicies - 证书策略
  - ✅ subjectKeyIdentifier - 主体密钥标识符（十六进制）
  - ✅ authorityKeyIdentifier - 颁发机构密钥标识符（十六进制）
  - ✅ 未知扩展自动解析并显示内容

#### 指纹标签
- SHA-256 指纹（十六进制，空格分隔）
- SHA-1 指纹（十六进制，空格分隔）
- MD5 指纹（十六进制，空格分隔）
- 一键复制指纹值

#### 原始数据标签
- PEM 格式证书（带标准头尾）
- DER 格式证书（十六进制，空格分隔）
- 一键复制原始数据

### 3. 便捷功能
- 📋 一键复制各项信息（序列号、DN、指纹等）
- 🎨 友好的错误提示和状态反馈
- 📝 示例证书快速加载（Let's Encrypt）
- 🌐 完全离线工作，数据不上传服务器
- 📱 响应式设计，支持移动端查看

## 技术实现

### 使用的库
- **[node-forge](https://github.com/digitalbazaar/forge)** v1.3.1 - 用于标准证书解析和加密算法
- **naive-ui** - 提供现代化的 UI 组件
- **Vue 3** - 使用组合式 API 构建

### 证书解析流程
1. **格式识别**: 自动检测 PEM/Base64/HEX 格式
2. **解码处理**: 转换为 DER 二进制格式
3. **ASN.1 解析**: 
   - 对于标准证书（RSA/ECDSA）使用 node-forge 解析
   - 对于国密证书（SM2）使用自定义 ASN.1 解析器
4. **UTF-8 解码**: 自动检测并解码 UTF-8 编码的中文字段
5. **扩展解析**: 完整解析所有标准扩展和自定义扩展
6. **指纹计算**: 使用 SHA-256/SHA-1/MD5 计算证书指纹
7. **数据格式化**: 友好展示所有字段（十六进制统一使用空格分隔）

### 关键技术特性
- **智能编码检测**: 自动识别并处理 UTF-8 多字节字符
- **扩展内容解析**: 不仅显示扩展 OID，还解析并展示实际内容
- **国密算法支持**: 完整的 SM2/SM3 算法识别和参数提取
- **十六进制规范化**: 所有二进制数据统一使用空格分隔的十六进制格式

## 使用示例

### 解析 PEM 证书
```
-----BEGIN CERTIFICATE-----
MIIDazCCAlOgAwIBAgIUTJNqGY...
-----END CERTIFICATE-----
```

### 解析 Base64 证书
```
MIIDazCCAlOgAwIBAgIUTJNqGY...
```

### 解析 HEX 证书
```
308203...
```

## 注意事项

1. 本工具仅解析证书内容，不验证证书链或签名
2. 所有操作均在浏览器本地完成，不会上传证书到服务器
3. 支持自签名证书和 CA 证书
4. 证书有效性仅基于本地时间判断
5. 扩展字段内容以证书实际包含的为准

## 致谢

本工具的开发使用了以下优秀的开源项目：

- **[node-forge](https://github.com/digitalbazaar/forge)** - 提供了强大的证书解析和加密算法支持
- **[Naive UI](https://www.naiveui.com/)** - 提供了美观易用的 Vue 3 组件库

特别感谢以上项目的作者和贡献者们！

## 开发信息

- 创建日期: 2024-11-22
- 最后更新: 2025-01-XX
- 作者: IT Tools
- 路径: `/certificate-viewer`

